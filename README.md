# Eleventy AMP Plugin

Quickly build interactive websites with Eleventy & AMP.

## Installation

Available on [npm](https://www.npmjs.com/package/@ampproject/eleventy-plugin-amp).

```
npm install eleventy-plugin-amp --save-dev
```

## Usage

Edit your Eleventy config file (probably `.eleventy.js`) and use `addPlugin` for integrating the plugin:

```js
const ampPlugin = require('@ampproject/eleventy-plugin-amp');
module.exports = function(eleventyConfig) {
  eleventyConfig.addPlugin(ampPlugin);
};
```

This will turn all pages generated by Eleventy into valid AMP pages.

### Using AMP Components in your templates

You can use AMP components out-of-the-box, For example, for creating an image carousel:

```html
<amp-carousel layout="responsive" width="300" height="200">
  <amp-img src="image1.png" alt="an image"></amp-img>
  <amp-img src="image2.png" alt="another image"></amp-img>
  <amp-img src="image3.png" alt="and another another image"></amp-img>
</amp-carousel>
```

There's no need to explicitly import the `amp-carousel` extension script, this is done automatically by the AMP plugin. Checkout the [AMP documentation for more components](https://amp.dev/documentation/components/) to use.

### Markdown Support

Markdown images are automatically converted to `amp-img`:

```
![image](https://unsplash.it/500/400)
```

### Shortcodes

AMP offers a rich set of third-party embeds. Some of these are available via short codes:

#### Video

```
{% video 'https://amp.dev/static/inline-examples/videos/kitten-playing.mp4' %}
```

#### Tweet

```
{% twitter "1182321926473162752" "responsive" 375 472 %}
```

#### Youtube

```
{% youtube "v0BVLgEEuMY" %}
```

#### Instagram

```
{% instagram "BMQ8i4lBTlb" %}
```

#### Github Gists

```
{% gist 'b9bb35bc68df68259af94430f012425f' 197 %}
```

### CSS

AMP requires all CSS to be inlined:

```
<style>
  {% include "sample.css" %}
</style>
```

`<style>` elements don't need to be defined in the `head`, but can be added anywhere on the page. This means, it's easy to modularize your CSS. For example, you can define style and markup in the same file, e.g. `components/greeter.njk`:

greeter.njk

```
<style>
.fancy-button {
  background: black;
  color: white;
  border-radius: 4px;
}
</style>
<button class="fancy-button">
  {{ buttonTitle }}
</button>
```

...and then use it in a different file like this:

layout.njk

```
{% set greeting = 'hello world' %}
{% include "components/greeter.njk" %}
```

A good idea is to use this approach to modularize your CSS to ensure that your pages will only pull in the CSS that is actually needed.

**Tip:** Modularizing CSS helps to stay within AMP’s 50kb CSS limit. The AMP plugin will automatically perform minification.

### Options

Optionally pass in an options object as the second argument to `addPlugin` to further customize this plugin pack.

```js
const ampPlugin = require('@ampproject/eleventy-plugin-amp');
module.exports = function(eleventyConfig) {
  eleventyConfig.addPlugin(ampPlugin, {
    // Disable AMP validation (enabled by default)
    validation: false,
    // Disable CSS minification (enabled by default)
    minifyCss: false,
  });
};
```

## Development

Run tests via:

```
$ npm test

```

### Adding new Shortcodes

You can add new shortcodes in [src/shortcodes/](src/shortcodes). It's best to copy and modify one of the existing shortcodes.

# License

Copyright 2020 The AMPHTML Authors

Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
